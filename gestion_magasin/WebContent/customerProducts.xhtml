<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<ui:composition template="/template/layout.xhtml">
		<ui:define name="title">Liste des produits</ui:define>

		<ui:define name="menu">
			<ui:include src="/template/customerMenu.xhtml" />
		</ui:define>
		<ui:define name="content">
			<f:view>

				<p:accordionPanel value="#{cstProducts.getAllCategories()}"
					var="cat">

					<p:tab title="#{cat.toString()}">
						<p:accordionPanel id="subAccordion" dynamic="true" cache="true"
							value="#{cstProducts.getSubCategories(cat)}" var="subCat">

							<p:tab title="#{subCat.name}">
								<h:form>

									<p:dataTable id="dt" value="#{cstProducts.getItems(subCat)}"
										var="it" styleClass="course-table"
										headerClass="course-table-header"
										footerClass="course-table-header"
										rowClasses="course-table-odd-row,course-table-even-row">

										<p:column>
											<p:graphicImage library="image" name="product-icon.png" />
										</p:column>
										<p:column headerText="DÃ©signation">
											<h:outputText value="#{it.designation}" />
										</p:column>
										<p:column headerText="QuantitÃ©">
											<form>
												<p:spinner value="#{it.quantity}"
													valueChangeListener="#{cstProducts.updateQuantity}">
													<p:ajax event="change"
														listener="#{cstProducts.updateOrderLine(it)}"
														update="@form" /></p:spinner>
											</form>
										</p:column>
									</p:dataTable>
								</h:form>
							</p:tab>

						</p:accordionPanel>
					</p:tab>
				</p:accordionPanel>

			</f:view>
		</ui:define>
	</ui:composition>
</h:body>
</html>

<!-- 	<p:spinner id="basic" value="#{it.quantity}" -->
<!-- 														valueChangeListener="#{productoBean.updateCantidad}" -->
<!-- 												 stepFactor="1" -->
<!-- 													min="0"> -->

<!-- 												</p:spinner> -->
<!-- 													<p:commandButton -->
<!-- 														actionListener="#{cstProducts.updateOrderLine(it)}" -->
<!-- 														id="button" icon="ui-icon-disk" title="Ajouter" /> -->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">


<ui:composition template="/template/layout.xhtml">

	<ui:define name="title">Livraison</ui:define>


	<ui:define name="menu">
		<ui:include src="/template/storekeeperMenu.xhtml" />
	</ui:define>

	<ui:define name="content">

		<h:form id="form" prependId="false">


			<p:growl id="msgs" showDetail="true" />


			<p:menubar>

				<f:facet name="options" style="float:left">
					<h:outputLabel value="Liste des commandes par équipe"
						style="margin-right:200px" />
					<p:commandButton type="button" value="Effectuer une livraison" />
				</f:facet>
			</p:menubar>
			<br />
			<ui:repeat var="team" value="#{ordersView.teams}">
				<p:selectBooleanCheckbox value="#{ordersView.checkBox}">
					<p:ajax listener="#{ordersView.cbListener}" update="form" />
				</p:selectBooleanCheckbox>

				<p:panel header="#{team.name}" toggleable="true" toggleSpeed="500"
					collapsed="true">

					<p:accordionPanel value="#{ordersView.orders}" var="ord">

						<p:tab
							title="#{ord.orderUser.firstName} #{ord.orderUser.lastName}">

							<p:dataTable id="orderDT" var="ord" value="#{ord}"
								selection="#{ordersView.selectedOrder}" rowKey="#{ord.orderId}">
								<p:column>
									<p:selectBooleanCheckbox value="#{ordersView.checkBox}">
										<p:ajax listener="#{ordersView.cbListener}" update="form" />
									</p:selectBooleanCheckbox>
								</p:column>

								<p:column headerText="Numéro">
									<h:outputText value="#{ord.orderId}" />
								</p:column>
								<p:column headerText="Date de soumission">
									<h:outputText value="#{ord.submissionDate}" />
								</p:column>
								<p:column headerText="Date de livraison">
									<h:outputText value="#{ord.deliveryDate}" />
								</p:column>
								<p:column headerText="Nombre d'articles">
									<h:outputText value="" />
								</p:column>
								<p:column headerText="Statut">
									<h:outputText value="#{ord.status}" />
								</p:column>
								<f:facet name="footer">
									<p:commandButton update="@([id$=form-dialog])"
										icon="ui-icon-search" value="View"
										onclick="PF('ordDialog').show()" />
								</f:facet>
							</p:dataTable>


						</p:tab>

					</p:accordionPanel>

				</p:panel>

			</ui:repeat>
			<h:form id="form-dialog">
				<p:dialog header="Car Info" widgetVar="ordDialog" modal="true"
					showEffect="fade" hideEffect="fade" resizable="false" width="300"
					height="250" style="margin-top : 10px">
					<p:outputPanel style="text-align:center;">
						<p:panelGrid columns="2"
							rendered="#{ordersView.selectedOrder ne null}"
							columnClasses="label,value">
							<p:column headerText="Id">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
							<p:column headerText="Numéro">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
							<p:column headerText="Date de soumission">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
							<p:column headerText="Date de livraison">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
							<p:column headerText="Nombre d'artcles">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
							<p:column headerText="Statut">
								<h:outputText value="#{ord.orderId}" />
							</p:column>
						</p:panelGrid>
					</p:outputPanel>
				</p:dialog>
			</h:form>
		</h:form>

	</ui:define>
</ui:composition>

</html>